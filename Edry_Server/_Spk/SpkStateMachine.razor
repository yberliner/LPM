    @inherits ForsightTester.Shared.AccordionInputBase
    @using CardModel

    @* ---------- markup ---------- *@
<div class="motor-wrapper my-2 mx-2">
        <div class="accordion accordion-primary" id="@ParentId">
            <div class="accordion-item motor-card">
                <h2 class="accordion-header" id="@HeadingId">
                    <button class="accordion-button"
                            type="button"
                            data-bs-toggle="collapse"
                            data-bs-target="#@CollapseId"
                            aria-controls="@CollapseId"
                            aria-expanded="true"
                            style="background: transparent;">
                        Sub-Module State-Machine indicator
                    </button>
                </h2>

                <div id="@CollapseId"
                     class="accordion-collapse collapse show"
                     aria-labelledby="@HeadingId"
                     data-bs-parent="#@ParentId">

                    <div class="accordion-body" style="padding:0;">
                        <table class="table table-sm motor-table mb-0" style="@TableStyle">
                            <thead>
                                <tr>
                                    <th class="text-center" style="width:15%;">Sub System</th>
                                    <th class="text-center" style="width:25%;">Modules</th>
                                    <th class="text-center" style="width:20%;">Error State</th>
                                    <th class="text-center" style="width:20%;">State</th>
                                 </tr>
                            </thead>
                            <tbody>
                                @for (int i = 0; i < Headers.Length; i++)
                                {
                                    int Locali=i;
                                    <tr>
                                        <td class="text-left text-bold">@Headers[Locali].SubSystem</td>
                                        <td class="text-left text-bold">@Headers[Locali].Modules</td>
                                        <td class="text-left text-bold"><span class="badge @Values![Locali].ErrorState.Style">@Values![Locali].ErrorState.Text</span></td>
                                        <td class="text-left text-bold"><span class="badge @Values![Locali].State.Style">@Values![Locali].State.Text</span></td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @code {
        /* ---------- unique IDs via IdPrefix ---------- */
        private string ParentId => $"accordion_STM_{IdPrefix}";
        private string HeadingId => $"heading_STM_{IdPrefix}";
        private string CollapseId => $"collapse_STM_{IdPrefix}";

        /* ---------- original component logic ---------- */

        [Parameter] public string IdPrefix { get; set; } = Guid.NewGuid().ToString("N");
        [Parameter] public string? TableStyle { get; set; }

        public record struct StateMachineValue(string Text, string Style);
        public record struct StateMachineValues(StateMachineValue ErrorState, StateMachineValue State);
        [Parameter] public StateMachineValues[]? Values { get; set; }

        public readonly record struct SubSystemModules(string SubSystem, string Modules);
        public static readonly SubSystemModules[] Headers =
        {
            //─── RWS ──────────────────────────────────────────────────────────────
            new("RWS", "Spare"),
            new("RWS", "FLA - 01"),
            new("RWS", "Sensors - 02"),
            new("RWS", "RCB Robot SW - 06"),
            new("RWS", "Manipulator L - 04"),
            new("RWS", "Manipulator R - 05"),
            //new("RWS", "General - 07"),

            //─── SWS ──────────────────────────────────────────────────────────────
            new("SWS", "MC L"),
            new("SWS", "MC R"),
            new("SWS", "Sensors"),
            new("SWS", "General"),
            new("SWS", "Ergonomics"),
            //new("SWS", "VC Robot SW"),
            //new("SWS", "3D Screen"),




            //─── MWS ──────────────────────────────────────────────────────────────
            new("MWS", "MICCB General"),
            new("MWS", "MICCB Sensors"),

            new("MWS", "Light Sources- Coax L"),
            new("MWS", "Light Sources- Coax R"),
            new("MWS", "Light Sources- Parax"),
            new("MWS", "Light Sources- Tracking"),
            new("MWS", "MOCB SENSORS"),
            new("MWS", "MOCB General"),
            
            //new("MWS", "wide field Image"),
            //new("MWS", "VC MIC SW"),
            //new("MWS", "XYZ Motion Axes"),
            //new("MWS", "Narrow field image"),
        };
    }
